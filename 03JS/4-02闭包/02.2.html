<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    function f1() {
        var n = 99;
        // 上面一行相当于
        var n; // 使用计数器 0
        n = 99; // 使用计数器 1
        // console.log(++n); // 使用计数器 2  当后面不再使用n时,计数器就变为0,0代表是垃圾,要被回收,
        // 使用闭包可以防止变量被回收,因为系统不知道外部的变量在内部会不会被使用

        // 闭包特点: (1) 函数外部可以获取函数内部的变量
        //           (2) 闭包会将整个函数的环境保存
        function f2() {
            console.log(++n);
        }
        return f2; // 没有return,内部变量也不会被销毁,
        // f2();     // f2() 运行了就会被销毁了,因为它运行了,只有内部函数不运行,编译器不知道它会不会允许,就是闭包
    }

    var f = f1();
    f(); // 100  这样变量不会被销毁
    f(); // 101
    f(); // 102
</script>

</html>